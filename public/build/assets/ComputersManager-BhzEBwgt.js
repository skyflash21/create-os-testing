import{r as v,T as C,d as M,o as m,e as p,a as e,n as g,t as a,F as U,i as A,x as q,k as z,b as n,u as l,w as _,h as x}from"./app-CIysMRTq.js";import{_ as k,a as D}from"./TextInput-DTLETjzp.js";import{_ as S}from"./InputLabel-DQ6wkMAo.js";import{C as V}from"./CustomButton-BjpqGt-I.js";import{C as I}from"./ConfirmationModal-BlZjVXlV.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Modal-Cqho5cY5.js";const O={class:"flex h-screen p-6 bg-gray-900"},j={class:"w-1/2 p-2 border-r bg-gray-800 rounded-lg"},K=e("h2",{class:"text-lg font-semibold mb-4 border-b pb-2 text-white"},"Liste des ordinateurs",-1),P={class:"mb-4 flex space-x-2"},G={class:"grid grid-cols-3 p-2 gap-5 overflow-y-auto overflow-x-hidden scrollbar-custom max-h-[calc(100vh-10rem)]"},H=["onClick"],J=e("img",{src:"/storage/Documentation/ComputerLogo.png",class:"w-10 h-10",alt:"Computer Icon"},null,-1),Q={class:"text-sm font-semibold text-center text-white"},R={class:"w-2/3 p-4 bg-gray-800 rounded-lg detail-container"},W=e("h2",{class:"text-lg font-semibold mb-4 border-b pb-2 text-white"},"Détails de l'ordinateur",-1),X={key:0,class:"info-box"},Y={class:"mb-6 text-white"},Z={class:"text-lg font-medium"},ee={class:"text-sm font-medium"},te={class:"text-sm font-medium"},se={class:"text-sm font-medium"},oe={class:"text-sm font-medium"},re={class:"text-sm font-medium"},ae={class:"text-sm font-medium"},ie={class:"text-sm font-medium"},ne={class:"mt-6"},le={class:"text-lg font-medium"},de={class:"h-4 bg-gray-300 rounded"},ce={class:"mt-2 text-sm"},ue={class:"grid grid-cols-2 gap-4"},me={class:"mt-6 flex justify-end space-x-4"},pe={key:1,class:"text-white"},_e=e("p",null,"Aucun ordinateur sélectionné. Cliquez sur un ordinateur dans la liste pour voir les détails.",-1),ve=[_e],he=e("p",null,"Êtes-vous sûr de vouloir supprimer cet ordinateur ? Cette action est irréversible.",-1),De={__name:"ComputersManager",props:{computers:Array},setup(E){const h=E,t=v(null),d=v(!1),r=C({_method:"PUT",id:"",name:"",description:""}),f=C({_method:"DELETE",id:""}),F=i=>{t.value=i,r.id=i.computer_id,r.name=i.computer_name,r.description=i.computer_description},N=()=>{r.put(route("computers.update",r.id),{onSuccess:()=>{t.value={...t.value,...r}},onError:()=>{console.error("Form submission error:",r.errors)}})},T=()=>{d.value=!0},$=()=>{f.delete(route("computers.destroy",r.id),{onSuccess:()=>{t.value=null,h.computers=h.computers.filter(i=>i.computer_id!==r.id),r.reset(),d.value=!1},onError:()=>{console.error("Form submission error:",f.errors)}})},b=()=>{d.value=!1},c=v("id"),u=v("asc"),B=M(()=>[...h.computers].sort((s,o)=>{if(c.value==="id")return u.value==="asc"?s.computer_id-o.computer_id:o.computer_id-s.computer_id;if(c.value==="name")return u.value==="asc"?s.computer_name.localeCompare(o.computer_name):o.computer_name.localeCompare(s.computer_name)}).map(s=>({...s,truncated_name:s.computer_name.length>9?`${s.computer_name.slice(0,6)}...`:s.computer_name}))),y=i=>{c.value===i||(c.value=i)},L=()=>{u.value=u.value==="asc"?"desc":"asc"},w=i=>({"px-3 py-1 text-gray-400 hover:text-white border-none rounded":!0,"text-white":c.value===i});return(i,s)=>(m(),p("div",O,[e("div",j,[K,e("div",P,[e("button",{onClick:s[0]||(s[0]=o=>y("id")),class:g(w("id"))}," Trier par ID ",2),e("button",{onClick:s[1]||(s[1]=o=>y("name")),class:g(w("name"))}," Trier par Nom ",2),e("button",{onClick:L,class:"px-3 py-1 text-gray-400 hover:text-white border-none rounded"},a(u.value.value==="asc"?"Croissant":"Décroissant"),1)]),e("div",G,[(m(!0),p(U,null,A(B.value,o=>(m(),p("div",{key:o.computer_id,onClick:fe=>F(o),class:g({"flex flex-col items-center space-y-2 transition-transform duration-150 hover:scale-105 cursor-pointer p-2 rounded-lg shadow-lg ":!0,"bg-gray-600 border-orange-500 border-4":t.value&&t.value.computer_id===o.computer_id,"bg-gray-700 border-gray-700 border-4":!(t.value&&t.value.computer_id===o.computer_id)})},[J,e("span",Q,a(o.computer_id)+" : "+a(o.truncated_name),1)],10,H))),128))])]),e("div",R,[W,t.value?(m(),p("div",X,[e("div",Y,[e("p",Z,"ID de l'ordinateur: "+a(t.value.computer_id),1),e("p",ee,"Nom: "+a(t.value.computer_name),1),e("p",te,"Description: "+a(t.value.computer_description),1),e("p",se,"Type: "+a(t.value.type),1),e("p",oe,"Avancé: "+a(t.value.is_advanced?"Oui":"Non"),1),e("p",re,"Côté Modem Sans Fil: "+a(t.value.wireless_modem_side),1),e("p",ae,"Dernière Utilisation: "+a(new Date(t.value.last_used_at).toLocaleDateString()),1),e("p",ie,"Créé le: "+a(new Date(t.value.created_at).toLocaleDateString()),1),e("div",ne,[e("p",le,"Espace disque utilisé: "+a(t.value.used_disk_space)+" / "+a(t.value.total_disk_space)+" bytes",1),e("div",de,[e("div",{class:"h-full bg-green-500",style:q({width:t.value.used_disk_space/t.value.total_disk_space*100+"%"})},null,4)]),e("p",ce,a((t.value.used_disk_space/t.value.total_disk_space*100).toFixed(2))+"%",1)])]),e("form",{onSubmit:z(N,["prevent"])},[e("div",ue,[e("div",null,[n(S,{for:"name",value:"Nom"}),n(k,{modelValue:l(r).name,"onUpdate:modelValue":s[2]||(s[2]=o=>l(r).name=o),id:"name",type:"text",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),n(D,{message:l(r).errors.name,class:"mt-2 text-red-500"},null,8,["message"])]),e("div",null,[n(S,{for:"description",value:"Description"}),n(k,{modelValue:l(r).description,"onUpdate:modelValue":s[3]||(s[3]=o=>l(r).description=o),id:"description",type:"text",class:"mt-1 block w-full"},null,8,["modelValue"]),n(D,{message:l(r).errors.description,class:"mt-2 text-red-500"},null,8,["message"])])]),e("div",me,[n(V,{type:"primary",disabled:l(r).processing},{default:_(()=>[x(" Mettre à jour l'ordinateur ")]),_:1},8,["disabled"]),n(V,{type:"danger",disabled:l(f).processing,onClick:T},{default:_(()=>[x(" Supprimer l'ordinateur ")]),_:1},8,["disabled"])])],32)])):(m(),p("div",pe,ve))]),n(I,{show:d.value,"onUpdate:show":s[4]||(s[4]=o=>d.value=o),"max-width":"sm",onClose:b},{title:_(()=>[x(" Confirmation de la suppression ")]),content:_(()=>[he]),footer:_(()=>[e("button",{onClick:b,class:"px-4 py-2 bg-gray-500 text-white rounded ml-2"},"Annuler"),e("button",{onClick:$,class:"px-4 py-2 bg-red-600 text-white rounded ml-2"},"Supprimer")]),_:1},8,["show"])]))}};export{De as default};
